# Titan View / å·¨å¤´è§†é‡ â€” é¡¹ç›®ç›®å½•ç»“æ„

> æœ€åæ›´æ–°ï¼š2026-02-25ï¼ˆPhase 3 & 4 å®Œæˆï¼‰

```
Titan View/
â”œâ”€â”€ prd.md                        # äº§å“éœ€æ±‚æ–‡æ¡£
â”œâ”€â”€ tech_spec.md                  # æŠ€æœ¯è½åœ°æ–‡æ¡£
â”œâ”€â”€ structure.md                  # æœ¬æ–‡ä»¶ï¼šç›®å½•ç»“æ„è¯´æ˜
â”œâ”€â”€ README.md                     # é¡¹ç›®å¯åŠ¨ä¸è¯´æ˜
â”œâ”€â”€ .gitignore
â”‚
â”œâ”€â”€ backend/                      # Python FastAPI åç«¯
â”‚   â”œâ”€â”€ main.py                   # åº”ç”¨å…¥å£ï¼Œæ³¨å†Œè·¯ç”±ã€å¯åŠ¨ CORS
â”‚   â”œâ”€â”€ database.py               # SQLAlchemy æ•°æ®åº“è¿æ¥ï¼ˆé»˜è®¤ SQLiteï¼Œæ”¯æŒ MySQLï¼‰
â”‚   â”œâ”€â”€ models.py                 # ORM æ•°æ®æ¨¡å‹ï¼ˆä¸‰å¼ æ ¸å¿ƒè¡¨ï¼‰
â”‚   â”œâ”€â”€ create_db.py              # åˆå§‹åŒ–æ•°æ®åº“è¡¨è„šæœ¬
â”‚   â”œâ”€â”€ requirements.txt          # Python ä¾èµ–æ¸…å•
â”‚   â”œâ”€â”€ titan_view.db             # SQLite æœ¬åœ°æ•°æ®åº“ï¼ˆå¼€å‘ç”¨ï¼Œç”Ÿäº§åˆ‡æ¢ MySQLï¼‰
â”‚   â”œâ”€â”€ venv/                     # Python è™šæ‹Ÿç¯å¢ƒï¼ˆå·² .gitignoreï¼‰
â”‚   â”œâ”€â”€ scheduler.py              # å®šæ—¶ä»»åŠ¡ï¼š04:00çˆ¬å– / 06:00AIç®€æŠ¥ / 12:00è¡¥å……
â”‚   â”œâ”€â”€ routers/                  # API è·¯ç”±æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ news.py               # GET /news â€” èµ„è®¯åˆ—è¡¨ï¼ˆæ”¯æŒ section/platform ç­›é€‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ reports.py            # GET /reports/{date} â€” æ¯æ—¥ç®€æŠ¥
â”‚   â”‚   â”œâ”€â”€ chat.py               # POST /chat/ask-titan â€” å·¨å¤´ AI å¯¹è¯
â”‚   â”‚   â””â”€â”€ pipeline.py           # POST /pipeline/run â€” æ‰‹åŠ¨è§¦å‘ AI æµæ°´çº¿
â”‚   â”œâ”€â”€ ai/                       # AI æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ volcengine.py         # ç«å±±å¼•æ“ / DeepSeek æ¥å£å°è£…
â”‚   â”‚   â”œâ”€â”€ personas.py           # 8ä½å·¨å¤´äººæ ¼ç³»ç»Ÿæç¤ºè¯
â”‚   â”‚   â””â”€â”€ pipeline.py           # ä¸‰æ­¥æµæ°´çº¿ï¼šåˆ†ç±»â†’æ´å¯Ÿâ†’ç®€æŠ¥ç”Ÿæˆ
â”‚   â””â”€â”€ crawlers/                 # çˆ¬è™«æ¨¡å—
â”‚       â”œâ”€â”€ base.py               # åŸºç±»ï¼šHTTPå·¥å…·ã€æ•°æ®åº“å†™å…¥
â”‚       â”œâ”€â”€ rss.py                # æ–°åç¤¾/è·¯é€ç¤¾/36æ°ª/è´¢æ–°/HN ç­‰ RSS
â”‚       â”œâ”€â”€ hot_search.py         # å¾®åšçƒ­æœ / ç™¾åº¦çƒ­æ¦œ
â”‚       â””â”€â”€ gov.py                # gov.cn / å‘æ”¹å§” / å›½å®¶ç»Ÿè®¡å±€
â”‚
â”œâ”€â”€ frontend/                     # Next.js 16 å‰ç«¯
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tailwind.config.js        # Tailwind CSS v3 é…ç½®
â”‚   â”œâ”€â”€ postcss.config.js
â”‚   â”œâ”€â”€ next.config.ts
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ lib/
â”‚       â”‚   â””â”€â”€ api.ts            # ç»Ÿä¸€ API å®¢æˆ·ç«¯ï¼ˆfetchNews / fetchReport / triggerPipelineï¼‰
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ Header.tsx
â”‚       â”‚   â”œâ”€â”€ Footer.tsx
â”‚       â”‚   â””â”€â”€ SectionCard.tsx   # å…«å¤§ç»´åº¦å¡ç‰‡ï¼ˆå«å®æ—¶æ•°æ®ï¼‰
â”‚       â””â”€â”€ app/
â”‚           â”œâ”€â”€ page.tsx          # é¦–é¡µï¼ˆSSRï¼Œæ¥å…¥çœŸå® APIï¼‰
â”‚           â”œâ”€â”€ news/page.tsx     # æƒ…æŠ¥èšåˆé¡µï¼ˆCSRï¼Œå¹³å°/ç»´åº¦åŒé‡ç­›é€‰ï¼‰
â”‚           â””â”€â”€ ask/page.tsx      # é—®é—®å·¨å¤´ï¼ˆ8ä½å·¨å¤´ + AI å¯¹è¯ï¼‰
â”‚   â”œâ”€â”€ public/                   # é™æ€èµ„æº
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ app/                  # Next.js App Router é¡µé¢
â”‚       â”‚   â”œâ”€â”€ layout.tsx        # å…¨å±€å¸ƒå±€ï¼ˆHeader + Footerï¼‰
â”‚       â”‚   â”œâ”€â”€ globals.css       # å…¨å±€æ ·å¼
â”‚       â”‚   â”œâ”€â”€ page.tsx          # é¦–é¡µï¼šæ¯æ—¥æ™¨é—´å†³ç­–ç®€æŠ¥
â”‚       â”‚   â”‚                     #   â”œâ”€ ä¸‰è‰²ä¿¡å·ç¯ï¼ˆğŸ”´é£é™©/ğŸŸ¢æœºä¼š/ğŸ”µä»·å€¼ï¼‰
â”‚       â”‚   â”‚                     #   â”œâ”€ å…«å¤§ç»´åº¦è§£è¯»å¡ç‰‡
â”‚       â”‚   â”‚                     #   â””â”€ å…«ä½å·¨å¤´ä»Šæ—¥é€Ÿè¯„
â”‚       â”‚   â”œâ”€â”€ news/
â”‚       â”‚   â”‚   â””â”€â”€ page.tsx      # æƒ…æŠ¥èšåˆé¡µï¼šå¹³å°+ç»´åº¦åŒç­›é€‰ï¼Œæ ‡é¢˜å¯è·³è½¬åŸæ–‡
â”‚       â”‚   â””â”€â”€ ask/
â”‚       â”‚       â””â”€â”€ page.tsx      # é—®é—®å·¨å¤´é¡µï¼š8ä½å¤§ä½¬å¤šé€‰å¯¹è¯ï¼Œå¿«æ·æé—®
â”‚       â””â”€â”€ components/
â”‚           â”œâ”€â”€ Header.tsx        # é¡¶éƒ¨å¯¼èˆªæ 
â”‚           â””â”€â”€ Footer.tsx        # åº•éƒ¨ç‰ˆæƒæ 
â”‚
â””â”€â”€ database/                     # æ•°æ®åº“ç›¸å…³ï¼ˆå¾…å¡«å…… SQL è„šæœ¬ï¼‰
```

---

## æ•°æ®åº“ä¸‰å¼ æ ¸å¿ƒè¡¨

| è¡¨å | è¯´æ˜ |
|------|------|
| `raw_news` | çˆ¬è™«åŸå§‹èµ„è®¯ï¼Œå«æ¥æºå¹³å°ã€æ ‡é¢˜ã€å†…å®¹ã€URLã€çŠ¶æ€ |
| `daily_reports` | AI ç”Ÿæˆçš„æ¯æ—¥ Markdown ç®€æŠ¥ï¼Œå«å®è§‚/ç§‘æŠ€è¯„åˆ† |
| `titan_insights` | å¤§ä½¬è§†è§’è§£è¯»ï¼Œå…³è” raw_newsï¼Œå«æƒ…ç»ªåˆ†ä¸å…³è”åº¦ |

---

## API æ¥å£æ¸…å•

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/` | å¥åº·æ£€æŸ¥ |
| GET | `/health` | æœåŠ¡çŠ¶æ€ |
| GET | `/news/` | è·å–åŸå§‹èµ„è®¯åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰ |
| GET | `/reports/{date}` | è·å–æŒ‡å®šæ—¥æœŸç®€æŠ¥ |

> å¾…å¼€å‘æ¥å£ï¼š
> - `GET /news/filter?persona=li_ka_shing` â€” å¤§ä½¬è§†è§’ç²¾é€‰æ–°é—»æµ
> - `POST /api/chat/ask-titan` â€” å®æ—¶è°ƒç”¨ AI å¤§ä½¬å¯¹è¯
> - `POST /api/pipeline/run` â€” æ‰‹åŠ¨è§¦å‘ AI åˆ†ææµæ°´çº¿

---

## ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’ï¼ˆRoadmapï¼‰

### Phase 2 â€” AI æ¥å…¥ï¼ˆå½“å‰é˜¶æ®µï¼‰
- [ ] ç”³è¯·ç«å±±å¼•æ“ API Keyï¼Œé…ç½® `.env`
- [ ] å®ç° `backend/ai/volcengine.py` â€” å°è£… DeepSeek/Doubao è°ƒç”¨
- [ ] å®ç° `POST /api/chat/ask-titan` â€” çœŸå® AI å¤§ä½¬å¯¹è¯æ¥å£
- [ ] å‰ç«¯ã€Œé—®é—®å·¨å¤´ã€é¡µæ¥å…¥çœŸå® APIï¼Œæ›¿æ¢ mock æ•°æ®

### Phase 3 â€” çˆ¬è™«æ•°æ®é‡‡é›†
- [ ] å®ç° `backend/crawlers/weibo.py` â€” å¾®åšçƒ­æœçˆ¬è™«
- [ ] å®ç° `backend/crawlers/xinhua.py` â€” æ–°åç¤¾ RSS è§£æ
- [ ] å®ç° `backend/crawlers/sina.py` â€” æ–°æµªè´¢ç»çˆ¬è™«
- [ ] å®ç° `backend/crawlers/gov.py` â€” æ”¿åºœç½‘ç«™ï¼ˆgov.cnï¼‰çˆ¬è™«
- [ ] å®ç°å®šæ—¶ä»»åŠ¡ `backend/scheduler.py` â€” æ¯æ—¥å‡Œæ™¨ 4:00 è‡ªåŠ¨è§¦å‘

### Phase 4 â€” ç®€æŠ¥è‡ªåŠ¨ç”Ÿæˆ
- [ ] å®ç° `backend/ai/pipeline.py` â€” ä¸‰æ­¥ AI æµæ°´çº¿ï¼ˆåˆ†ç±»â†’å¤§ä½¬è¿‡æ»¤â†’ç”Ÿæˆç®€æŠ¥ï¼‰
- [ ] å‰ç«¯é¦–é¡µå…«å¤§ç»´åº¦æ¥å…¥çœŸå®æ•°æ®
- [ ] å‰ç«¯æƒ…æŠ¥èšåˆé¡µæ¥å…¥çœŸå®çˆ¬è™«æ•°æ®

### Phase 5 â€” ä¼˜åŒ–ä¸ä¸Šçº¿
- [ ] é…ç½® MySQL ç”Ÿäº§æ•°æ®åº“
- [ ] éƒ¨ç½²åç«¯ï¼ˆRailway / é˜¿é‡Œäº‘ï¼‰
- [ ] éƒ¨ç½²å‰ç«¯ï¼ˆVercelï¼‰
- [ ] å¢åŠ æ›´å¤šå¤§ä½¬è§†è§’ï¼ˆå·´è²ç‰¹æ›´æ·±åº¦ Prompt è°ƒä¼˜ï¼‰
